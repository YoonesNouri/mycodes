/*		Raw lists		*/$(function(){	$("html").delegate("#list a","click",function(e){		if ($(this).hasClass("pager-btn")||$(this).hasClass("new_page")||$(this).attr("href")=='#') return;		e.preventDefault();		$("#list_edit").html('<div class="alert alert-info">Running...</div>');		$.get($(this).attr("href"), "" ,function(data){ 			$("#list_edit").html(html_slice(data,'raw editor'));			scroll_to($("#list_edit"));			/*		history		*/			if ($("#history_display").length>0){				tableBody = document.getElementById('res');				clearTableBody();				diff( $("#raw_current").val().split('\n'),$("#raw_editor").val().split('\n'));			}					});					}).delegate("#raw_edit #raw_editor","keyup",function(e){		tableBody = document.getElementById('res');		clearTableBody();		diff( $("#raw_current").val().split('\n'),$("#raw_editor").val().split('\n'));		try	{		   JSON.parse($("#raw_editor").val());		   $('.json-error').remove();		} catch(e)	{		   $("body").append('<div class="alert alert-error json-error" style="position:fixed;bottom:20px;right:20px;width:300px;font-size:25px">JSON IS NOT VALID</div>');		}		//$("#diff_result").slideDown("slow");	});	$("html").delegate("#raw_edit","submit",function(e){		e.preventDefault();		$.post($(this).attr("action"), $(this).serialize() ,function(data){ 			$("#list_edit").html(html_slice(data,'raw editor'));			scroll_to($("#list_edit"));		});					});	$("html").delegate("#search_list","keyup",function(e){		clearTimeout(command_run);   		command_run=setTimeout(function() { search_rows(); }, 300);				});			$("html").delegate(".pager-btn","click",function(e){		e.preventDefault();		$.get("?search="+$("#search_list").val()+"&page="+$(this).data("page"), "" ,function(data){ 			$("#list table").html(html_slice(data,'search_results'));		});			});			/* Share resources */	$("html").delegate(".share_list a","click",function(e){		e.preventDefault();		var row=$(this).parents('tr');		$(".share_list_add").prepend('<a href="#"><input name="ids[]" type="hidden" value="'+row.find('.id').text()+'">'+row.find('.title').text()+'</a>');		var group=parseInt(row.find('.group').text());		if (group>0) $("#group_id").val(group);	});			$("html").delegate(".share_list_add a","click",function(e){		e.preventDefault();		$(this).empty().remove();	});		});var search_ajax_request,command_run,searched;function search_rows(){	if (search_ajax_request) search_ajax_request.abort();	if (searched==$("#search_list").val()) return;	searched=$("#search_list").val();	search_ajax_request=$.get("?search="+searched, "" ,function(data){ 		$("#list table").html(html_slice(data,'search_results'));	});}