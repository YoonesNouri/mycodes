(function(){function g(){var a=e($(".s_40").val()),b=e($(".b_40").val());$(".dollar_buy").each(function(){var a=e($(this).data("exchange"));if(0!=a){var d=e($(".p_"+$(this).data("id")).val()),a=b/a-d;$(this).html(f(h(a)))}});$(".dollar_sell").each(function(){var b=e($(this).data("exchange"));if(0!=b){var d=e($(".p_"+$(this).data("id")).val());d||(d=0);b=a/b+d;$(this).html(f(h(b)))}})}function h(a){var b=4-a.toString().split(".")[0].length;if(1>b)return Math.round(a);b=Math.pow(10,b);return Math.round(a*
b)/b}function k(a){a=a.data("spread");var b=e($(".s_"+a).val()),c=e($(".b_"+a).val()),c=b-c,d=Math.round(1E4*c/b)/100;0==b&&(d=0);$(".sp_"+a).html(f(h(c))+" (%"+d+")").removeClass("neg pos").addClass(l(c))}function l(a){return-1!=a.toString().indexOf("-")?"neg":/([1-9]+)/.test(a.toString())?"pos":""}function f(a){var b,c;b=(a+"").split(".");a=b[0];b=1<b.length?"."+b[1]:"";for(c=/(\d+)(\d{3})/;c.test(a);)a=a.replace(c,"$1,$2");return a+b}function e(a){if(void 0!=a&&""!=a){a=a.toString().replace(/,/gi,
"");var b=/([.,0-9]+)/;if(b.test(a))return 1*b.exec(a)[0]}return""}$(function(){$("#container").delegate("input","keyup change",function(){var a=$(this),b=e(a.val());a.val(f(b));var c=e(a.data("price"));if(0!=b){var c=b-c,d=Math.round(1E4*c/b)/100;0==b&&(d=0);$("."+a.data("change")).html(f(c+" (%"+d+")")).removeClass("neg pos").addClass(l(c))}}).delegate("#link_buttons a","click",function(a){a.preventDefault();if(a=$(this).data("click"))$("."+a).trigger("click");else{a=$(this).data("loc");var b=$(this).html();
b&&0!=b&&($("."+a).val(b),$("."+a).trigger("change"))}}).delegate(".buy,.sell","change keyup",function(){k($(this))}).delegate(".s_40,.b_40","change keyup",function(){g()}).delegate(".add_spread","change keyup",function(){g()}).delegate("#link_buttons","submit",function(a){a.preventDefault();$("#notice").slideUp("slow");$.post("save-exchange.php",$(this).serialize(),function(a){$("#notice").html(a).slideDown("slow")})});g();$(".buy,.sell").each(function(){k($(this))})})})();
